name: Consolidate and Convert Document

on: push

jobs:
  convert_via_pandoc:
    name: Convert via Pandoc
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2
      - run: mkdir output
      # make an oobe version
      - uses: docker://pandoc/core:2.9
        with:
          args: "--standalone --output=output/oobeBlueprint.docx --reference-doc=templates/oobeTemplate.docx sections/title.txt"
      # make a DTA version
      - uses: docker://pandoc/core:2.9
        with:
          args: "--standalone --output=output/DTABlueprint.docx --reference-doc=templates/DTATemplate.docx sections/title.txt"
      - name: setup git config username
        run: |
          git config user.name "GitHub Actions Bot"
          git config user.email "<>"
      - name: commit
        run: |
          git add output/*.docx
          git commit -m "New version of output document"
          git push origin main
